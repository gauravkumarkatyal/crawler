import requests
from bs4 import BeautifulSoup as bs
# from requests import sessions
# s=sessions()
cookies = {
    'visid_incap_1686039': '5lEDO1YJS/iMNWQdUsm+DEKRY2MAAAAAQ0IPAAAAAACAyBOoAWfUnKw7nylA2ClX4/Z3TOS3pmUq',
    '_gcl_au': '1.1.288583075.1667469636',
    '_ga_2LJLJKYZ3R': 'GS1.1.1667796498.11.1.1667796543.0.0.0',
    '_ga': 'GA1.2.588194849.1667469636',
    '_ga_7ZEZ2L98N2': 'GS1.1.1667796498.11.1.1667796543.15.0.0',
    'BVBRANDID': '93dffa88-0b74-4571-9ab8-fa832bfa9116',
    'FPID': 'FPID2.2.qy8MP0BCRfU3Zeky7uYdnXGp2RLxUC1UQfkuX8GrGuI%3D.1667469636',
    '_pin_unauth': 'dWlkPVpEZzBNRGRqWm1NdE9UVmpaUzAwTUdZekxUa3hNekV0WmpSbE5tVmhNR1U0TWpFNQ',
    'IR_PI': '5f6521a1-5b5e-11ed-8a73-a7ed7598257b%7C1667882943806',
    'inside-au': '1163667419-2d29d30ee21932dcd8fd5e557cf9d6783c60709e0435f3327437eac230d209cd-0-0',
    '_gid': 'GA1.2.1363489234.1667469640',
    '_fbp': 'fb.1.1667469641077.1711691218',
    '_hjSessionUser_873034': 'eyJpZCI6ImVhZjA1NzQyLTdkZjgtNWVmZi1hNDc3LTE3ZDAwN2JiNGIxNCIsImNyZWF0ZWQiOjE2Njc0Njk2NDA5MTEsImV4aXN0aW5nIjp0cnVlfQ==',
    '_gaexp': 'GAX1.2.OaEU5pZLQhGIWE1qu0c46g.19378.1',
    'ASP.NET_SessionId': '3ct5ydfhtrtmtorruoy01ktx',
    'iSAMS': 'pG4/Oeu6oGNxLvijpsUnEuzKjSr8ooKt0SfU8Ek5i7ANQO8kBdfKA5L3kBpOzhAkhmWk56pcAId0BTC3d3Dn8Q==',
    'incap_ses_715_1686039': 'sIWZQL/L2l43ZV19cDHsCbJtZ2MAAAAAblL4KJPQulC5Mp92XGsvDA==',
    'run_fs_for_user': '410',
    'fpGUID': 'a9955d21-0e84-4cb9-8369-4b049c95dd85',
    'fpFingerprint': 'ded5859b732e9f5e87060fc40b995d011b1dc646358e54e31804c3e8d76d2578',
    'IR_gbd': 'davidjones.com',
    'IR_5504': '1667796543806%7C406511%7C1667796543806%7C%7C',
    'iSAMSShopper': '0W8A7HUfPyF4BQPW2q518+ldCoic+QKh2cD19CrxxGme9j7AM74zMEXaoo2INQ4EZHV7VJCJy+nPaSKsefP/kw==',
    'BVImplmain_site': '10581',
    'incap_ses_1132_1686039': 'XZicXANWXGV+oMTaz6y1DxaOaGMAAAAAmpBTIbx3YqKCBT6RfKtgMQ==',
    'FPLC': 'FxjdYyyQMF8WQDbZOtwQ0qTJMBqBWM0AsorUzzflidnsSm60shoRQiuA34Se4J%2Fhm%2FydTXPuBIMcaDEi6fa8xOk9ybpKaNABgTjuqW6V6qr5D%2BsYPcWwBp6PlgA1Fw%3D%3D',
    'BVBRANDSID': 'fbd47338-2b05-4b27-aa9d-ba732cec831c',
    '_gat': '1',
    '_gat_UA-489931-23': '1',
    '_hjIncludedInSessionSample': '0',
    '_hjSession_873034': 'eyJpZCI6ImM4MWNmZmEwLTVjMGItNDc1OS1hOWNlLTkwZjgxMjY0ZmZjMyIsImNyZWF0ZWQiOjE2Njc3OTY1MTAwNzksImluU2FtcGxlIjpmYWxzZX0=',
    '_hjAbsoluteSessionInProgress': '0',
    '_uetsid': '5d2c57f05b5e11ed9d7b3b9213678b3c',
    '_uetvid': '5d2c5e005b5e11ed9c13ab5da23a5f16',
    '_gat_UA-489931-18': '1',
}
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:106.0) Gecko/20100101 Firefox/106.0',
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8',
    'Accept-Language': 'en-US,en;q=0.5',
    # 'Accept-Encoding': 'gzip, deflate, br',
    'Connection': 'keep-alive',
    # Requests sorts cookies= alphabetically
    # 'Cookie': 'visid_incap_1686039=5lEDO1YJS/iMNWQdUsm+DEKRY2MAAAAAQ0IPAAAAAACAyBOoAWfUnKw7nylA2ClX4/Z3TOS3pmUq; _gcl_au=1.1.288583075.1667469636; _ga_2LJLJKYZ3R=GS1.1.1667796498.11.1.1667796543.0.0.0; _ga=GA1.2.588194849.1667469636; _ga_7ZEZ2L98N2=GS1.1.1667796498.11.1.1667796543.15.0.0; BVBRANDID=93dffa88-0b74-4571-9ab8-fa832bfa9116; FPID=FPID2.2.qy8MP0BCRfU3Zeky7uYdnXGp2RLxUC1UQfkuX8GrGuI%3D.1667469636; _pin_unauth=dWlkPVpEZzBNRGRqWm1NdE9UVmpaUzAwTUdZekxUa3hNekV0WmpSbE5tVmhNR1U0TWpFNQ; IR_PI=5f6521a1-5b5e-11ed-8a73-a7ed7598257b%7C1667882943806; inside-au=1163667419-2d29d30ee21932dcd8fd5e557cf9d6783c60709e0435f3327437eac230d209cd-0-0; _gid=GA1.2.1363489234.1667469640; _fbp=fb.1.1667469641077.1711691218; _hjSessionUser_873034=eyJpZCI6ImVhZjA1NzQyLTdkZjgtNWVmZi1hNDc3LTE3ZDAwN2JiNGIxNCIsImNyZWF0ZWQiOjE2Njc0Njk2NDA5MTEsImV4aXN0aW5nIjp0cnVlfQ==; _gaexp=GAX1.2.OaEU5pZLQhGIWE1qu0c46g.19378.1; ASP.NET_SessionId=3ct5ydfhtrtmtorruoy01ktx; iSAMS=pG4/Oeu6oGNxLvijpsUnEuzKjSr8ooKt0SfU8Ek5i7ANQO8kBdfKA5L3kBpOzhAkhmWk56pcAId0BTC3d3Dn8Q==; incap_ses_715_1686039=sIWZQL/L2l43ZV19cDHsCbJtZ2MAAAAAblL4KJPQulC5Mp92XGsvDA==; run_fs_for_user=410; fpGUID=a9955d21-0e84-4cb9-8369-4b049c95dd85; fpFingerprint=ded5859b732e9f5e87060fc40b995d011b1dc646358e54e31804c3e8d76d2578; IR_gbd=davidjones.com; IR_5504=1667796543806%7C406511%7C1667796543806%7C%7C; iSAMSShopper=0W8A7HUfPyF4BQPW2q518+ldCoic+QKh2cD19CrxxGme9j7AM74zMEXaoo2INQ4EZHV7VJCJy+nPaSKsefP/kw==; BVImplmain_site=10581; incap_ses_1132_1686039=XZicXANWXGV+oMTaz6y1DxaOaGMAAAAAmpBTIbx3YqKCBT6RfKtgMQ==; FPLC=FxjdYyyQMF8WQDbZOtwQ0qTJMBqBWM0AsorUzzflidnsSm60shoRQiuA34Se4J%2Fhm%2FydTXPuBIMcaDEi6fa8xOk9ybpKaNABgTjuqW6V6qr5D%2BsYPcWwBp6PlgA1Fw%3D%3D; BVBRANDSID=fbd47338-2b05-4b27-aa9d-ba732cec831c; _gat=1; _gat_UA-489931-23=1; _hjIncludedInSessionSample=0; _hjSession_873034=eyJpZCI6ImM4MWNmZmEwLTVjMGItNDc1OS1hOWNlLTkwZjgxMjY0ZmZjMyIsImNyZWF0ZWQiOjE2Njc3OTY1MTAwNzksImluU2FtcGxlIjpmYWxzZX0=; _hjAbsoluteSessionInProgress=0; _uetsid=5d2c57f05b5e11ed9d7b3b9213678b3c; _uetvid=5d2c5e005b5e11ed9c13ab5da23a5f16; _gat_UA-489931-18=1',
    'Upgrade-Insecure-Requests': '1',
    'Sec-Fetch-Dest': 'document',
    'Sec-Fetch-Mode': 'navigate',
    'Sec-Fetch-Site': 'cross-site',
}

r=requests.get('https://www.davidjones.com/kids/boys/underwear-socks-and-pjs?src=fh&refine=product_hierarchy_subclass:n2fa;nightie;pj20sets;pyjamas;sleepwear', cookies=cookies, headers=headers)

# r.text
soup=bs(r.text,'html.parser')
pro=soup.find_all('div','item')
print(pro)
for i in pro:
    p_url=i.find('a','image-link').get('href')
    # b_name=i.find('div','item-brand').text
    name=i.find('h4').find('a').text
    id=i.get('data-fkid')
    cookies = {
    'visid_incap_1686039': '5lEDO1YJS/iMNWQdUsm+DEKRY2MAAAAAQ0IPAAAAAACAyBOoAWfUnKw7nylA2ClX4/Z3TOS3pmUq',
    '_gcl_au': '1.1.288583075.1667469636',
    '_ga_2LJLJKYZ3R': 'GS1.1.1667796498.11.1.1667798178.0.0.0',
    '_ga': 'GA1.2.588194849.1667469636',
    '_ga_7ZEZ2L98N2': 'GS1.1.1667796498.11.1.1667798178.59.0.0',
    'BVBRANDID': '93dffa88-0b74-4571-9ab8-fa832bfa9116',
    'FPID': 'FPID2.2.qy8MP0BCRfU3Zeky7uYdnXGp2RLxUC1UQfkuX8GrGuI%3D.1667469636',
    '_pin_unauth': 'dWlkPVpEZzBNRGRqWm1NdE9UVmpaUzAwTUdZekxUa3hNekV0WmpSbE5tVmhNR1U0TWpFNQ',
    'IR_PI': '5f6521a1-5b5e-11ed-8a73-a7ed7598257b%7C1667884578843',
    'inside-au': '1163667419-2d29d30ee21932dcd8fd5e557cf9d6783c60709e0435f3327437eac230d209cd-0-0',
    '_gid': 'GA1.2.1363489234.1667469640',
    '_fbp': 'fb.1.1667469641077.1711691218',
    '_hjSessionUser_873034': 'eyJpZCI6ImVhZjA1NzQyLTdkZjgtNWVmZi1hNDc3LTE3ZDAwN2JiNGIxNCIsImNyZWF0ZWQiOjE2Njc0Njk2NDA5MTEsImV4aXN0aW5nIjp0cnVlfQ==',
    '_gaexp': 'GAX1.2.OaEU5pZLQhGIWE1qu0c46g.19378.1',
    'ASP.NET_SessionId': '3ct5ydfhtrtmtorruoy01ktx',
    'iSAMS': '4im4idRbinhm52QHxLmmMMGeDWTyANMCsCvOiQOyZErqXMt714LtNm3FwJZzJHXh8CR/k/xLxRVxOXFoQprKRQ==',
    'incap_ses_715_1686039': 'sIWZQL/L2l43ZV19cDHsCbJtZ2MAAAAAblL4KJPQulC5Mp92XGsvDA==',
    'run_fs_for_user': '410',
    'fpGUID': 'a9955d21-0e84-4cb9-8369-4b049c95dd85',
    'fpFingerprint': 'ded5859b732e9f5e87060fc40b995d011b1dc646358e54e31804c3e8d76d2578',
    'IR_gbd': 'davidjones.com',
    'IR_5504': '1667798178843%7C0%7C1667798178843%7C%7C',
    'iSAMSShopper': '0W8A7HUfPyF4BQPW2q518+ldCoic+QKh2cD19CrxxGme9j7AM74zMEXaoo2INQ4EZHV7VJCJy+nPaSKsefP/kw==',
    'BVImplmain_site': '10581',
    'incap_ses_1132_1686039': 'XZicXANWXGV+oMTaz6y1DxaOaGMAAAAAmpBTIbx3YqKCBT6RfKtgMQ==',
    'FPLC': 'FxjdYyyQMF8WQDbZOtwQ0qTJMBqBWM0AsorUzzflidnsSm60shoRQiuA34Se4J%2Fhm%2FydTXPuBIMcaDEi6fa8xOk9ybpKaNABgTjuqW6V6qr5D%2BsYPcWwBp6PlgA1Fw%3D%3D',
    'BVBRANDSID': 'fbd47338-2b05-4b27-aa9d-ba732cec831c',
    '_hjIncludedInSessionSample': '0',
    '_hjSession_873034': 'eyJpZCI6ImM4MWNmZmEwLTVjMGItNDc1OS1hOWNlLTkwZjgxMjY0ZmZjMyIsImNyZWF0ZWQiOjE2Njc3OTY1MTAwNzksImluU2FtcGxlIjpmYWxzZX0=',
    '_hjAbsoluteSessionInProgress': '0',
    '_gat_UA-489931-23': '1',
    '_uetsid': '5d2c57f05b5e11ed9d7b3b9213678b3c',
    '_uetvid': '5d2c5e005b5e11ed9c13ab5da23a5f16',
    '_gat': '1',
    '_gat_UA-489931-18': '1',
}

    headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:106.0) Gecko/20100101 Firefox/106.0',
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8',
    'Accept-Language': 'en-US,en;q=0.5',
    # 'Accept-Encoding': 'gzip, deflate, br',
    'Referer': 'https://www.davidjones.com/kids/boys/underwear-socks-and-pjs?src=fh&refine=product_hierarchy_subclass:n2fa;nightie;pj20sets;pyjamas;sleepwear',
    'Connection': 'keep-alive',
    # Requests sorts cookies= alphabetically
    # 'Cookie': 'visid_incap_1686039=5lEDO1YJS/iMNWQdUsm+DEKRY2MAAAAAQ0IPAAAAAACAyBOoAWfUnKw7nylA2ClX4/Z3TOS3pmUq; _gcl_au=1.1.288583075.1667469636; _ga_2LJLJKYZ3R=GS1.1.1667796498.11.1.1667798178.0.0.0; _ga=GA1.2.588194849.1667469636; _ga_7ZEZ2L98N2=GS1.1.1667796498.11.1.1667798178.59.0.0; BVBRANDID=93dffa88-0b74-4571-9ab8-fa832bfa9116; FPID=FPID2.2.qy8MP0BCRfU3Zeky7uYdnXGp2RLxUC1UQfkuX8GrGuI%3D.1667469636; _pin_unauth=dWlkPVpEZzBNRGRqWm1NdE9UVmpaUzAwTUdZekxUa3hNekV0WmpSbE5tVmhNR1U0TWpFNQ; IR_PI=5f6521a1-5b5e-11ed-8a73-a7ed7598257b%7C1667884578843; inside-au=1163667419-2d29d30ee21932dcd8fd5e557cf9d6783c60709e0435f3327437eac230d209cd-0-0; _gid=GA1.2.1363489234.1667469640; _fbp=fb.1.1667469641077.1711691218; _hjSessionUser_873034=eyJpZCI6ImVhZjA1NzQyLTdkZjgtNWVmZi1hNDc3LTE3ZDAwN2JiNGIxNCIsImNyZWF0ZWQiOjE2Njc0Njk2NDA5MTEsImV4aXN0aW5nIjp0cnVlfQ==; _gaexp=GAX1.2.OaEU5pZLQhGIWE1qu0c46g.19378.1; ASP.NET_SessionId=3ct5ydfhtrtmtorruoy01ktx; iSAMS=4im4idRbinhm52QHxLmmMMGeDWTyANMCsCvOiQOyZErqXMt714LtNm3FwJZzJHXh8CR/k/xLxRVxOXFoQprKRQ==; incap_ses_715_1686039=sIWZQL/L2l43ZV19cDHsCbJtZ2MAAAAAblL4KJPQulC5Mp92XGsvDA==; run_fs_for_user=410; fpGUID=a9955d21-0e84-4cb9-8369-4b049c95dd85; fpFingerprint=ded5859b732e9f5e87060fc40b995d011b1dc646358e54e31804c3e8d76d2578; IR_gbd=davidjones.com; IR_5504=1667798178843%7C0%7C1667798178843%7C%7C; iSAMSShopper=0W8A7HUfPyF4BQPW2q518+ldCoic+QKh2cD19CrxxGme9j7AM74zMEXaoo2INQ4EZHV7VJCJy+nPaSKsefP/kw==; BVImplmain_site=10581; incap_ses_1132_1686039=XZicXANWXGV+oMTaz6y1DxaOaGMAAAAAmpBTIbx3YqKCBT6RfKtgMQ==; FPLC=FxjdYyyQMF8WQDbZOtwQ0qTJMBqBWM0AsorUzzflidnsSm60shoRQiuA34Se4J%2Fhm%2FydTXPuBIMcaDEi6fa8xOk9ybpKaNABgTjuqW6V6qr5D%2BsYPcWwBp6PlgA1Fw%3D%3D; BVBRANDSID=fbd47338-2b05-4b27-aa9d-ba732cec831c; _hjIncludedInSessionSample=0; _hjSession_873034=eyJpZCI6ImM4MWNmZmEwLTVjMGItNDc1OS1hOWNlLTkwZjgxMjY0ZmZjMyIsImNyZWF0ZWQiOjE2Njc3OTY1MTAwNzksImluU2FtcGxlIjpmYWxzZX0=; _hjAbsoluteSessionInProgress=0; _gat_UA-489931-23=1; _uetsid=5d2c57f05b5e11ed9d7b3b9213678b3c; _uetvid=5d2c5e005b5e11ed9c13ab5da23a5f16; _gat=1; _gat_UA-489931-18=1',
    'Upgrade-Insecure-Requests': '1',
    'Sec-Fetch-Dest': 'document',
    'Sec-Fetch-Mode': 'navigate',
    'Sec-Fetch-Site': 'same-origin',
}

    params = {
    'nav': '952416',
}

    r_1=requests.get('https://www.davidjones.com/product/rock-your-kid-boys-the-amazing-spiderman-short-sleeve-pj-set-{}.format(id)', params=params, cookies=cookies, headers=headers)
    # r_1.text
    soup_2=bs(r_1.text,'html.parser')
    item=soup_2.find_all('div','main-container')
    for j in item:
        img_1=j.find('li','alternate top-product default').find('a').get('href')
        # soup.find('section','product-detail').find('a').get('href')
        # print(id)